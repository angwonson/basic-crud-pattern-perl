[% META title = 'Ticket List' -%]
 
[% # Note That the '-' at the beginning or end of TT code  -%]
[% # "chomps" the whitespace/newline at that end of the    -%]
[% # output (use View Source in browser to see the effect) -%]
 
<p>
  New Ticket:
  <a href="[% c.uri_for(c.controller.action_for('create')) %]">Create</a>
</p>

[% # Some basic HTML with a loop to display tickets -%]
<table>
<tr><th>&nbsp;</th><th>ID</th><th>Title</th><th>Status</th><th>User</th><th>Links</th></tr>
[% # Display each ticket in a table row %]
[% FOREACH ticket IN tickets -%]
  <tr>
    <td><a href="[% c.uri_for(c.controller.action_for('delete'), [ticket.id]) %]">[X]</a></td>
    <td>[% ticket.id %]</td>
    <td>[% ticket.title %]</td>
    <td>[% ticket.status.status %]</td>
    <td>
[% IF ticket.user.first_name %]
    [% ticket.user.first_name %]
[% ELSE %]
    Not Assigned
[% END %]
</td>
    <td>
        [% # Add a link to edit a ticket %]
        <a href="[% c.uri_for(c.controller.action_for('edit'), [ticket.id]) %]">Edit</a>
    </td>
  </tr>
[% END -%]
</table>

<br/>
<p>Hello [% c.user.username %], you have the following roles:</p>
 
<ul>
  [% # Dump list of roles -%]
  [% FOR role = c.user.roles %]<li>[% role %]</li>[% END %]
  [% # All users are "users" - there isn't actually a role in the DB -%]
  <li>User</li>
</ul>
